<!DOCTYPE html>
<html lang="en" xmlns:Phone="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Portal</title>
    <link rel="stylesheet" href="styles.css"> <!-- Link to your CSS file -->
    <style>
        /* Basic Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: #c3bcbc;
            color: #0a0a0b;
        }

        .logo {
            height: 50px; /* Adjust height as needed */
            width: auto; /* Maintain aspect ratio */
        }

        /* Navigation Bar */
        /* Header Styles */
        header {
            position: static;
            width: 100%;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 20px;
            text-align: left;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        header h1 {
            margin: 0;
            font-size: 2em;
            font-weight: bold;
        }

        header nav {
            margin: 0;
        }

        header nav a {
            color: white;
            margin: 0 15px;
            text-decoration: none;
            font-size: 1.2em;
            position: relative;
            transition: color 0.3s ease;
        }

        header nav a:hover {
            color: #007bff;
        }

        header nav a::after {
            content: '';
            position: absolute;
            width: 0%;
            height: 2px;
            bottom: -5px;
            left: 50%;
            background-color: #007bff;
            transition: all 0.3s ease-in-out;
        }

        header nav a:hover::after {
            width: 100%;
            left: 0;
        }


        .container {
            width: 90%;
            max-width: 1200px;
            margin: -80px auto 20px;
            background-color: #fff;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            position: relative;
        }

        .company-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
            border-bottom: 2px solid #ddd;
            padding-bottom: 20px;
        }

        .company-header h1 {
            font-size: 28px;
            color: #004080;
        }

        .company-header p {
            font-size: 16px;
            color: #777;
        }

        .company-logo {
            position: absolute;
            top: -50px;
            left: 30px;
        }

        .company-logo img {
            height: 100px;
            width: 100px;
            border-radius: 50%;
            border: 5px solid white;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        .company-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
            border-bottom: 2px solid #ddd;
            padding-bottom: 20px;
        }
        .company-header h1 {
            font-size: 28px;
            color: #004080;
        }
        .company-header p {
            font-size: 16px;
            color: #777;
        }
        .company-logo {
            position: absolute;
            top: -50px;
            left: 30px;
        }
        .company-logo img {
            height: 100px;
            width: 100px;
            border-radius: 50%;
            border: 5px solid white;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        .company-details {
            margin: 20px 0;
        }
        .company-details h2 {
            color: #004080;
            border-bottom: 3px solid #004080;
            display: inline-block;
            margin-bottom: 10px;
        }
        .company-details p {

            margin-bottom: 15px;
            font-size: 16px;
            color: #3e3838;
        }
        .company-metrics {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }
        .metric {
            font-weight: bolder;
            color: #004080;
            flex: 1;
            background-color: #f0f0f5;
            font-size: 24px;
            padding: 20px;
            margin: 0 10px;
            text-align: center;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        .metric h3 {
            font-weight:bold;
            margin-bottom: 10px;
            font-size: 22px;
            color: #004080;
        }
        .metric p {
            font-size: 10px;
            margin: 0;
            color: #6a6060;
        }
        .contact-btn {
            background-color: #004080;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            text-transform: uppercase;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        .button {
            padding: 10px 20px;
            background-color: #004080;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            border: none;
        }
        .button:hover {
            background-color: #002850;
        }

        .container1 {
            text-align: center;
        }

        .contact-btn:hover,.edit-profile-btn{
            background-color: #002850;
        }
        .social-icons {
            margin-top: 20px;
            text-align: center;
        }
        .social-icons a {
            margin: 0 10px;
            color: #004080;
            font-size: 24px;
            text-decoration: none;
            transition: color 0.3s;
        }
        .social-icons a:hover {
            color: #002850;
        }
        footer {
            background-color: #3e3838;
            color: white;
            text-align: center;
            padding: 15px 0;
            margin-top: 40px;
        }
        footer p {
            margin: 0;
        }


        /* Style for messages icon */
        .messages-link {

            position: relative;
            display: inline-block;
        }

        .messages-icon {
            padding-top: 5px;
            height: 25px; /* Adjust the icon size */
            width: auto;
        }

        .unread-count {
            position: absolute;
            top: -10px;
            right: -10px;
            background-color: #ff0000; /* Red background for the unread count */
            color: white;
            border-radius: 50%;
            padding: 5px 10px;
            font-size: 0.6em;
            display: none; /* Initially hidden */
        }
    </style>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
</head>
<body>


<!-- Header with Logo and Navigation -->
<header>
    <a href="/">
        <img src="images/logo.png" alt="Jobmagnet Logo" class="logo">
    </a>
    <nav>
        <a href="/EmpHomeLogged.html">HOME</a>
        <a href="/EmpviewProfile.html">PROFILE</a>
        <a href="/applicants.html">APPLICANTS</a>
        <a href="/PostJob.html">POST A JOB</a>
        <a href="/PostedJobs.html">POSTED JOBS</a>
        <a href="/seeker/seekerUnreadMessages.html" class="messages-link">
            <img src="images/message.png" alt="Messages" class="messages-icon">
            <span id="unreadCount" class="unread-count"></span>
        </a>
    </nav>
</header>
<div class="banner"></div>

<img id="bannerImage" src="#" alt="Company Banner" style="width: 100%; height: 250px; object-fit: cover;">
</div>
<div class="container">
    <div class="company-logo">
        <img id="companyLogo" src="#" alt="Company Logo">
    </div>

    <br>
    <div class="company-header">
        <div>
            <h1 for="companyName" id="companyName">ABC Tech Solutions</h1>
        </div>
    </div>

    <div class="company-details" >
        <h2>About Us</h2>
        <p for="about" id="about">ABC Tech Solutions is a global leader in delivering innovative tech solutions to businesses. We specialize in software development, IT consulting, and cloud services, and have helped over 500 clients improve their operational efficiency through technology.
            Founded in 2010, we have continuously pushed the boundaries of technology to offer cutting-edge solutions that meet the needs of our diverse clientele. Our team of 500+ professionals is dedicated to providing world-class services that help businesses achieve their goals.</p>
    </div>

    <div class="company-details">
        <h2>Core Values</h2>
        <p for="coreValues" id="coreValues">At ABC Tech Solutions, our values are at the heart of everything we do. We believe in:

            Innovation and continuous improvement
            Integrity and accountability
            Customer-centric solutions
            Excellence in execution
        </p>
    </div>

    <div class="company-details">
        <h2>Contact Information</h2>

        <br>

        <label for="email">Email: </label>
        <span id="email"></span>
        <br>
        <!--
                <label for="mobileNo">Phone:</label>
                <span id="mobileNo"></span>
                -->

        <label for="address">Address: </label>
        <span id="address"></span>
        <br>

    </div>

    <div class="company-metrics">
        <div class="metric">
            <label for="no_of_Employees">Employees: </label>
            <h3><span id="no_of_Employees"></span></h3>

        </div>
        <div class="metric">
            <label for="years">In Business </label>
            <h3><span id="years"></span></h3>

        </div>
        <div class="metric">
            <label for="projectsCompleted">Projects Completed </label>
            <h3><span id="projectsCompleted"></span></h3>


        </div>
    </div>

    <div class="social-icons">
        <a href="#"><i class="fab fa-linkedin"></i></a>
        <a href="#"><i class="fab fa-twitter"></i></a>
        <a href="#"><i class="fab fa-facebook"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a>
    </div>
    <br>
    <div class="container1">
        <a href="/EmpEditProfile.html" class="button">Edit Profile</a>

    </div>

</div>

<footer>
    <p>&copy; 2024 Job Magnet. All rights reserved.</p>
</footer>



<script>

    document.addEventListener('DOMContentLoaded', async () => {
        const recipientEmail = localStorage.getItem('email');
        if (recipientEmail) {
            try {
                const response = await fetch(`/api/messages/unread/${recipientEmail}`);
                const unreadMessages = await response.json();

                const unreadCount = unreadMessages.length;
                const unreadCountElement = document.getElementById('unreadCount');

                if (unreadCount > 0) {
                    unreadCountElement.textContent = unreadCount;
                    unreadCountElement.style.display = 'inline-block'; // Show the unread count if there are unread messages
                } else {
                    unreadCountElement.style.display = 'none'; // Hide if no unread messages
                }
            } catch (err) {
                console.error('Error fetching unread messages:', err);
            }
        }
    });

    function fetchEmpProfile() {
        const email = localStorage.getItem('email');
        if (!email) {
            alert('User not logged in');
            window.location.href = '/login.html';
            return;
        }

        fetch(`/api/employers/profile?email=${encodeURIComponent(email)}`)
            .then(response => response.json())
            .then(data => {
                document.getElementById('email').textContent = data.email;
                document.getElementById('companyName').textContent = data.companyName;
                document.getElementById('about').textContent = data.about;
                document.getElementById('address').textContent = data.address;
                document.getElementById('years').textContent = data.years;
                document.getElementById('no_of_Employees').textContent = data.no_of_Employees;
                document.getElementById('projectsCompleted').textContent = data.projectsCompleted;
                document.getElementById('coreValues').textContent = data.coreValues;

                if (data.bannerImage) {
                    document.getElementById('bannerImage').src = 'data:image/png;base64,' + data.bannerImage;
                }
                if (data.companyLogo) {
                    document.getElementById('companyLogo').src = 'data:image/jpeg;base64,' + data.companyLogo;
                }
            })
            .catch(error => console.error('Error fetching profile:', error));
    }

    function editProfile() {
        window.location.href = '/EmpEditProfile.html';
    }

    window.onload = fetchEmpProfile;
</script>

</body>
</html>
